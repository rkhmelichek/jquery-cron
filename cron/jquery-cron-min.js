(function(c){function m(a){return"undefined"==typeof a?!1:!0}function q(a){var b=RegExp("^("+x+"\\s){4}"+x+"$");"string"==typeof a&&b.test(a)||c.error("cron: invalid initial value");for(var b=a.split(" "),g=[0,0,1,1,0],d=[59,23,31,12,6],h=0;h<b.length;h++)if("*"!=b[h]){var e=parseInt(b[h]);m(e)&&e<=d[h]&&e>=g[h]||c.error("cron: invalid value found (col "+(h+1)+") in "+a)}for(var f in y)if(y[f].test(a))return f;c.error("cron: valid but unsupported cron format")}function B(a){var b,g,d,c,e;b=g=d=c=
e="*";a=a.data("block");var f=a.period.find("select").val();switch(f){case "minute":break;case "hour":b=a.mins.find("select").val();break;case "day":b=a["time-mins"].find("select").val();g=a["time-hrs"].find("select").val();break;case "week":b=a["time-mins"].find("select").val();g=a["time-hrs"].find("select").val();e=a.dow.find("select").val();break;case "month":b=a["time-mins"].find("select").val();g=a["time-hrs"].find("select").val();d=a.dom.find("select").val();break;case "year":b=a["time-mins"].find("select").val();
g=a["time-hrs"].find("select").val();d=a.dom.find("select").val();c=a.month.find("select").val();break;default:return f}return[b,g,d,c,e].join(" ")}for(var z={},l={initial:"* * * * *",readOnly:!1,minuteOpts:{minWidth:100,itemWidth:30,columns:4,rows:void 0,title:"Minutes Past the Hour"},timeHourOpts:{minWidth:100,itemWidth:20,columns:2,rows:void 0,title:"Time: Hour"},domOpts:{minWidth:100,itemWidth:30,columns:void 0,rows:10,title:"Day of Month"},monthOpts:{minWidth:100,itemWidth:100,columns:2,rows:void 0,
title:void 0},dowOpts:{minWidth:100,itemWidth:void 0,columns:void 0,rows:void 0,title:void 0},timeMinuteOpts:{minWidth:100,itemWidth:20,columns:4,rows:void 0,title:"Time: Minute"},effectOpts:{openSpeed:400,closeSpeed:400,openEffect:"slide",closeEffect:"slide",hideOnMouseOut:!0},customValues:void 0,onChange:void 0},n="",b=0;60>b;b++)var k=10>b?"0":"",n=n+("<option value='"+b+"'>"+k+b+"</option>\n");for(var r="",b=0;24>b;b++)k=10>b?"0":"",r+="<option value='"+b+"'>"+k+b+"</option>\n";for(var s="",b=
1;32>b;b++)s+="<option value='"+b+"'>"+b+(1==b||21==b||31==b?"st":2==b||22==b?"nd":3==b||23==b?"rd":"th")+"</option>\n";for(var t="",k="January February March April May June July August September October November December".split(" "),b=0;b<k.length;b++)t+="<option value='"+(b+1)+"'>"+k[b]+"</option>\n";for(var u="",k="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),b=0;b<k.length;b++)u+="<option value='"+b+"'>"+k[b]+"</option>\n";for(var v="",k="minute hour day week month year".split(" "),
b=0;b<k.length;b++)v+="<option value='"+k[b]+"'>"+k[b]+"</option>\n";var w={minute:[],hour:["mins"],day:["time-hrs","time-mins"],week:["dow","time-hrs","time-mins"],month:["dom","time-hrs","time-mins"],year:["dom","month","time-hrs","time-mins"]},x="(((\\d{1,2},)*\\d{1,2})|\\*)",y={minute:/^(\*\s){4}\*$/,hour:/^((\d{1,2},)*\d{1,2})\s(\*\s){3}\*$/,day:/^(((\d{1,2},)*\d{1,2})\s){2}(\*\s){2}\*$/,week:/^(((\d{1,2},)*\d{1,2})\s){2}(\*\s){2}((\d{1,2},)*\d{1,2})$/,month:/^(((\d{1,2},)*\d{1,2})\s){3}\*\s\*$/,
year:/^(((\d{1,2},)*\d{1,2})\s){4}\*$/};z.getCronType=q;var p={init:function(a){var b=a?a:{};a=c.extend([],l,b);var g={readOnly:a.readOnly},d=c.extend({},l.effectOpts,b.effectOpts,g);c.extend(a,{minuteOpts:c.extend({},l.minuteOpts,d,g,b.minuteOpts),domOpts:c.extend({},l.domOpts,d,g,b.domOpts),monthOpts:c.extend({},l.monthOpts,d,g,b.monthOpts),dowOpts:c.extend({},l.dowOpts,d,g,b.dowOpts),timeHourOpts:c.extend({},l.timeHourOpts,d,g,b.timeHourOpts),timeMinuteOpts:c.extend({},l.timeMinuteOpts,d,g,b.timeMinuteOpts)});
var h="";if(m(a.customValues))for(var e in a.customValues)h+="<option value='"+a.customValues[e]+"'>"+e+"</option>";e=m(q(a.initial))?m(a.customValues)&&"object"!=typeof a.customValues?!0:!1:!0;if(e)return this;e={};var b={},g={},f=c("<table><tr></tr></table>").appendTo(this).find("tr");f.append(e.period=c("<td class='cron-period-before'>Every </td>"));h=g.period=c("<td class='cron-period'><select name='cron-period'>"+h+v+"</select></td>");h.appendTo(f);h=h.find("select");h.bind("change.cron",A.periodChanged);
h.data("root",this);h.gentleSelect(d);f.append(e.dom=c("<td class='cron-block cron-block-dom-before'>on the: </td>"));d=g.dom=c("<td class='cron-block cron-block-dom'><select name='cron-dom' multiple='multiple'>"+s+"</select></td>");d.appendTo(f);d.data("root",this);d.find("select").gentleSelect(a.domOpts).data("root",this);f.append(e.month=c("<td class='cron-block cron-block-month-before'>of: </td>"));d=g.month=c("<td class='cron-block cron-block-month'><select name='cron-month' multiple='multiple'>"+
t+"</select></td>");d.appendTo(f);d.data("root",this);d.find("select").gentleSelect(a.monthOpts).data("root",this);f.append(e.mins=c("<td class='cron-block cron-block-mins-before'>at </td>"));d=g.mins=c("<td class='cron-block cron-block-mins'><select name='cron-mins' multiple='multiple'>"+n+"</select></td>");d.appendTo(f);d.data("root",this);d.find("select").gentleSelect(a.minuteOpts).data("root",this);f.append(b.mins=c("<td class='cron-block cron-block-mins-after'> minutes past the hour</td>"));
f.append(e.dow=c("<td class='cron-block cron-block-dow-before'>on: </td>"));d=g.dow=c("<td class='cron-block cron-block-dow'><select name='cron-dow' multiple='multiple'>"+u+"</select></td>");d.appendTo(f);d.data("root",this);d.find("select").gentleSelect(a.dowOpts).data("root",this);f.append(e["time-hrs"]=c("<td class='cron-block cron-time-hour-before'>at </td>"));d=g["time-hrs"]=c("<td class='cron-block cron-time-hour'><select name='cron-time-hour' multiple='multiple'>"+r+"</select></td>");d.appendTo(f);
d.data("root",this);d.find("select").gentleSelect(a.timeHourOpts).data("root",this);f.append(e["time-mins"]=c("<td class='cron-block cron-time-min-before'>: </td>"));d=g["time-mins"]=c("<td class='cron-block cron-time-min'><select name='cron-time-min' multiple='multiple'>"+n+"</select></td>");d.appendTo(f);d.data("root",this);d.find("select").gentleSelect(a.timeMinuteOpts).data("root",this);this.find("select").bind("change.cron-callback",A.somethingChanged);this.data("options",a);this.data("block",
g);this.data("blockBefore",e);this.data("blockAfter",b);this.data("initialized",!1);return p.value.call(this,a.initial)},value:function(a){if(!a)return B(this);var b=q(a);if(!m(b))return!1;var c=this.data("initialized"),d=this.data("options");if(c&&d.readOnly)return!1;c=this.data("block");a=a.split(" ");a={mins:a[0],hour:a[1],dom:a[2],month:a[3],dow:a[4]};for(var d=w[b],h=0;h<d.length;h++){var e=d[h],f;f="time-mins"==e?a.mins:"time-hrs"==e?a.hour:a[e];c[e].find("option").each(function(a){this.selected=
!1});f=f.split(",");for(var k=0;k<f.length;k++){var l=f[k];c[e].find("option").each(function(a){if(this.value==Number(l))return this.selected=!0,!1});c[e].find("select").gentleSelect("update")}}c.period.find("select").val(b).gentleSelect("update").trigger("change");this.data("initialized",!0);return this}},A={periodChanged:function(){var a=c(this).data("root"),b=a.data("initialized"),g=a.data("options");if(!b||!g.readOnly){var b=a.data("blockBefore"),g=a.data("blockAfter"),d=a.data("block"),h=c(this).val();
a.find(".cron-block").hide();if(w.hasOwnProperty(h))for(a=w[c(this).val()],h=0;h<a.length;h++){var e=a[h],f=b[e];f&&f.show();d[e].show();(e=g[e])&&e.show()}}},somethingChanged:function(){var a=c(this).data("root"),b=a.data("options").onChange;m(b)&&c.isFunction(b)&&b.call(a)}};c.fn.cron=function(a){if("test"===a)return z;if(p[a])return p[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof a&&a)c.error("Method "+a+" does not exist on jQuery.cron");else return p.init.apply(this,
arguments)}})(jQuery);
